Horse Cavalry on most battlefields in history finds their value in their ability to carry out swift flanking maneuvers and rapid advances into weak points and into the enemy's supplies and rear. Ranged rifle fire began to blunt the impact of Cavalry charges even more so than the pikeman/bayonet square formations of old.  Even during the battle of Waterloo (at the end of the Napoleonic Wars) the squares helped blunt the impact of horse cavalry charges.

In the US Civil War (and the wars you have mentioned) cavalry still had a strong role to play in scouting and being a rapid shock force, particularly useful in those flanking and supply line sorts of raids.  One of the major changes that impacted the use of horse cavalry (aside from the deadly machine guns of WW1 and later) was the use of standardized rifle cartridges.  Rifles that now could be reloaded very quickly and with better range and accuracy, a trained rifleman with a clear field of fire might be able to get off multiple shots at a horse-mounted calvary man before the latter could get into melee range. The Calvary unit is also a much larger target for the infantryman as well.  This also applies to artillery.  Field artillery also gets smaller (and larger), lighter, easier to reload, more accurate, and more deadly over this time period.  

Horse Calvary attacks into even minimally prepared positions became a horrible waste of resources.  Up to and even including some WW1 battles Calvary's objective was specifically to avoid fixed positions and find routes of supply, unaware and unfortified forces, disrupt the ability to create fixed positions and prevent the enemy Calvary from doing the same.  Even in the early days of the trenches of the Western Front, it was believed that if a hole in the lines could be punched enough to get Calvary through it could be used to exploit the gap and potentially turn a flank.  

Horses continued to play an important role even in WW2 for moving men and material around the front lines.  Mechanization in the forms of armored vehicles and tanks replaced the role from WW2 moving forward.   The late 19th and early 20th centuries' wars marked the transition from Horse to Mechanized Cavalry even if most of the tactics stayed the same.  I believe that the gap in having the technology to adequately replace the horse on the battlefield directly led to the stalemate issues seen at the Western Front, which in many ways echoed a similar stalemate 50 years earlier during the US Civil War on the Virginia Front.   I believe that there is a gradient between the two time periods where militaries had to come to grips with the industrialization of warfare and what that means for the role of cavalry and it's transition into the "modern" era.
