Al-Qaeda was behind that and both sides have said the Taliban was not part of it. They were allies off an on but Al-Qaeda never shared power with them. 

&gt; According to bin Laden, the Taliban were not involved in the September 11th attacks, stating in a tape sent to al-Jazeera: “I am the one responsible... The Afghan people and government knew nothing whatsoever about these events”.[514]

&gt; At the end of 2008, the Taliban was in talks to sever all ties with al-Qaeda.[515]

&gt; In 2011, Alex Strick van Linschoten and Felix Kuehn at New York University's Center on International Cooperation claimed that the two groups did not get along at times before the 11 September attacks, and they have continued to fight since on account of their differences.[516]

&gt; In July 2012, an anonymous senior-ranking Taliban commander stated that "Our people consider al-Qaeda to be a plague that was sent down to us by the heavens. Some even concluded that al-Qaeda are actually the spies of America. Originally, the Taliban were naive and ignorant of politics and welcomed al-Qaeda into their homes. But al-Qaeda abused our hospitality." He went on to further claim that about 70% of the Taliban are angry with al-Qaeda, revealing the icy relationship between the two groups.[517][518]

https://en.wikipedia.org/wiki/Taliban#Al-Qaeda
