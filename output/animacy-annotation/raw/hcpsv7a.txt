The fact that civilians were chosen as _(adjacent)_ targets is unfortunate, but rational considering the circumstances. 

The Japanese had deliberately placed military installations in or near civilian areas, so as to dissuade enemy forces from wreaking havoc on them—picking them out one-by-one would not have been a viable strategy, especially for forcing an early surrender. Thus, any decisive action taken by the US would have resulted in disproportionately great civilian casualties.

Seeing as the Emperor at the time was vehemently refusing to accept peace, the US had to undertake some extreme measure to appeal to his senses—the looming landfall of US troops was clearly not enough, and, if carried out, could well have resulted in an even greater number of casualties on both sides before the war ended.

Consider also the USSR—towards the end of the war, it became all but clear that they were a considerable military threat that well could continue waging war in western Europe to expand its territory. Political and military officials thought it wise to establish their destructive weaponry in order to discourage further violent conflict and retain authority in the landscaping of the post-war world.

It is a very delicate matter that even now is not resolved to satisfaction. Boiling it down to a binary moral question is intellectually disingenuous and ignorant of the complexities of the real world.
